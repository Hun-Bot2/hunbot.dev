---
title: 'ãƒ–ãƒ­ã‚°é–‹ç™ºãƒ­ã‚° 02'
description: 'å¤šè¨€èª (i18n) å¯¾å¿œã¨ç”»åƒãƒ‘ã‚¹æœ€é©åŒ–ã®è¨˜éŒ²'
pubDate: '2025-10-28'
# heroImage: '/images/blog-placeholder-2.jpg'
tags: ['Devlog', 'Astro', 'i18n', 'Refactoring']
category: 'devlog'
---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
å€‹äººãƒ–ãƒ­ã‚°ã®å¤šè¨€èªå¯¾å¿œã¨ç”»åƒã‚·ã‚¹ãƒ†ãƒ æ”¹å–„

- æœŸé–“: 2025-10-28
- å½¹å‰²: ãƒ–ãƒ­ã‚°é–‹ç™ºè€…

---

## ä¸»ãªã‚¿ã‚¹ã‚¯

- Astro ã® i18n è¨­å®šã¨å¤šè¨€èªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®Ÿè£…
- ãƒ–ãƒ­ã‚°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¨€èªåˆ¥ã«æ§‹é€ åŒ–
- ç”»åƒãƒ‘ã‚¹ã‚’ `src/assets` ã‹ã‚‰ `public/images` ã¸ç§»è¡Œ
- å‹å®‰å…¨æ€§ã‚’ä¿ã¡ãªãŒã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«å†æ§‹æˆ

---

## ä¸»è¦ä½œæ¥­ã¾ã¨ã‚

### 1. Astro i18n è¨­å®š (`astro.config.mjs`)

```javascript
i18n: {
  defaultLocale: 'ko',
  locales: ['ko', 'jp', 'en'],
  routing: {
    prefixDefaultLocale: false
  }
}
```

- **éŸ“å›½èª**: `/` (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãªã—)
- **æ—¥æœ¬èª**: `/jp/`
- **è‹±èª**: `/en/`

### 2. ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ  (`src/i18n/ui.ts`)

- 3è¨€èª (ko, jp, en) ã®è¾æ›¸ã‚’å®šç¾©
- `useTranslations()` ã§å‹å®‰å…¨ã«ã‚­ãƒ¼ã¸ã‚¢ã‚¯ã‚»ã‚¹
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ–ãƒ­ã‚°ã€About ã®ã™ã¹ã¦ã® UI ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¿»è¨³

**ä¸»ãªã‚­ãƒ¼ä¾‹**:
- `nav`: home, blog, about
- `blog`: all-posts, read-more, no-posts, tags, category
- `about`: title, greeting, intro, background, interests, skills, contact

### 3. LanguagePicker ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`src/components/LanguagePicker.astro`)

- ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³å½¢å¼ã®è¨€èªåˆ‡æ›¿
- ç¾åœ¨ã®è¨€èªã‚’ ğŸŒ ã‚¢ã‚¤ã‚³ãƒ³ + ãƒ†ã‚­ã‚¹ãƒˆã§è¡¨ç¤º
- ãƒ«ãƒ¼ãƒˆã¯ç¶­æŒã—ãŸã¾ã¾è¨€èªãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ã¿å¤‰æ›´

### 4. è¨€èªåˆ¥ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (`src/pages/[lang]/`)

```
src/pages/
  â”œâ”€â”€ index.astro (/ â†’ /ko/ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ)
  â”œâ”€â”€ about.astro (/about â†’ /ko/about ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ)
  â””â”€â”€ [lang]/
      â”œâ”€â”€ index.astro
      â”œâ”€â”€ about.astro
      â””â”€â”€ blog/
          â”œâ”€â”€ index.astro
          â””â”€â”€ [...slug].astro
```

- `getStaticPaths()` ã§ ko / jp / en ã®ãƒ‘ã‚¹ç”Ÿæˆ
- `post.id.startsWith(\`${lang}/\`)` ã§è¨€èªã”ã¨ã®è¨˜äº‹ã‚’ãƒ•ã‚£ãƒ«ã‚¿
- å„ãƒšãƒ¼ã‚¸ã§ `useTranslations(lang)` ã‚’ä½¿ç”¨

### 5. ãƒ–ãƒ­ã‚°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ§‹é€ ã®å†ç·¨

```
src/content/blog/
  â”œâ”€â”€ ko/
  â”‚   â”œâ”€â”€ devlog/
  â”‚   â”œâ”€â”€ review/
  â”‚   â””â”€â”€ contemplation/
  â”œâ”€â”€ jp/
  â”‚   â””â”€â”€ sample.md
  â””â”€â”€ en/
      â””â”€â”€ sample.md
```

### 6. ç”»åƒã‚·ã‚¹ãƒ†ãƒ æ”¹å–„

**èª²é¡Œ**:
- `src/assets/` ã‚’å‚ç…§ã™ã‚‹ relative path ãŒå´©å£Š
- `image()` ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¨ public ãƒ•ã‚©ãƒ«ãƒ€ã® URL ãŒè¡çª
- è¤‡é›‘ãªå‹ãƒã‚§ãƒƒã‚¯ã§ãƒ¡ãƒ³ãƒ†ãŒå›°é›£

**å¯¾å¿œ**:
1. ã™ã¹ã¦ã®ç”»åƒã‚’ `public/images/` ã«ç§»å‹•
2. `content.config.ts` ã‹ã‚‰ `image()` ã‚’å¤–ã— `z.string().optional()` ã«
3. `BaseHead.astro` ã¨ `BlogPost.astro` ã‹ã‚‰ Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‰Šé™¤
4. `<img>` ã‚¿ã‚°ã«çµ±ä¸€

**é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/content.config.ts`: heroImage ã‚¹ã‚­ãƒ¼ãƒç°¡ç´ åŒ–
- `src/components/BaseHead.astro`: æ–‡å­—åˆ— URL å¯¾å¿œ
- `src/layouts/BlogPost.astro`: ç”»åƒå‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯å‰Šæ¸›
- `src/pages/[lang]/about.astro`: ç”»åƒ import ã‚’å»ƒæ­¢ã— URL ã‚’ç›´æ›¸ã

**æ­£ã—ã„ãƒ‘ã‚¹ä¾‹**:
```markdown
heroImage: '/images/KOSSDA.png'
```

### 7. ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰æ•´ç†

- `/blog` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å®Œå…¨å‰Šé™¤
- é‡è¤‡ã—ã¦ã„ãŸãƒ–ãƒ­ã‚°ãƒã‚¹ãƒˆã‚’é™¤å»
- æœªä½¿ç”¨ã®ç”»åƒ import ã‚’å‰Šé™¤

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã®å¤‰æ›´

### è¿½åŠ è¨­å®š
- `astro.config.mjs`: i18n è¨­å®š
- `src/i18n/ui.ts`: ç¿»è¨³è¾æ›¸

### æ›´æ–°ã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `Header.astro`: LanguagePicker ã‚’çµ±åˆ
- `BaseHead.astro`: ç”»åƒã‚’æ–‡å­—åˆ— URL ã¨ã—ã¦æ‰±ã†
- `BlogPost.astro`: ç”»åƒã®å‹ãƒã‚§ãƒƒã‚¯ã‚’æ’¤å»ƒ

### å‰Šé™¤ã—ãŸä¾å­˜
- `astro:assets` Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ImageMetadata å‹

---

## Issue ã¨è§£æ±º

### Issue 1: Content Collection ã®ç”»åƒå‚ç…§ã‚¨ãƒ©ãƒ¼
- ç—‡çŠ¶: `ImageNotFound: Could not find requested image`
- åŸå› : `image()` ãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒå¤šéšå±¤ãƒ‘ã‚¹ã‚’è§£æ±ºã§ããªã„
- å¯¾å¿œ: public/images ã¸ç§»è¡Œã—ã€æ–‡å­—åˆ—ãƒ‘ã‚¹ã«çµ±ä¸€

### Issue 2: BaseHead ã¨ç”»åƒå‹ã®ä¸ä¸€è‡´
- ç—‡çŠ¶: `Property 'src' does not exist on type 'string'`
- åŸå› : ImageMetadata ã‚’æƒ³å®šã—ã¦ã„ãŸ
- å¯¾å¿œ: prop ã‚’ string ã«å¤‰æ›´ã—ã€fallback ã‚’ `/images/blog-placeholder-1.jpg` ã«å›ºå®š

### Issue 3: About ãƒšãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰å¤±æ•—
- ç—‡çŠ¶: `Rollup failed to resolve import "/images/my_photo.png"`
- åŸå› : public é…ä¸‹ã®ç”»åƒã‚’ import ã—ã‚ˆã†ã¨ã—ãŸ
- å¯¾å¿œ: import ã‚’å‰Šé™¤ã— `src="/images/my_photo.jpeg"` ã¨ç›´æ¥æŒ‡å®š

---

## å­¦ã‚“ã ã“ã¨

### Astro Content Collections ã®é™ç•Œ
- `image()` ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯æµ…ã„éšå±¤å‘ã‘
- è¨€èªåˆ¥ã®å…¥ã‚Œå­æ§‹é€ ã§ã¯ public ãƒ•ã‚©ãƒ«ãƒ€ãŒå®‰å…¨
- å‹å®‰å…¨ã¨ã‚·ãƒ³ãƒ—ãƒ«ã•ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’å¸¸ã«æ„è­˜

### i18n å®Ÿè£…ã®æˆ¦ç•¥
- URL ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ SEO ã«æœ‰åˆ©
- æ—¢å­˜ãƒªãƒ³ã‚¯ã‚’å£Šã•ãªã„ã‚ˆã†ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èªã¯ prefix ãªã—ãŒè‰¯ã„
- ç¿»è¨³è¾æ›¸ã‚’ä¸€å…ƒç®¡ç†ã™ã‚‹ã¨é‹ç”¨ã‚³ã‚¹ãƒˆãŒä¸‹ãŒã‚‹

### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®é‡è¦æ€§
- è¤‡é›‘ãªå‹ãƒã‚§ãƒƒã‚¯ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ ãŒå®‰å®šã™ã‚‹
- ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã¯æ—©æœŸã«æ½°ã™ã“ã¨ã§æŠ€è¡“çš„è² å‚µã‚’é˜²ã’ã‚‹
- å°ã•ãåŒºåˆ‡ã£ã¦ `dev â†’ build â†’ deploy` ã§ç¢ºèªã™ã‚‹ã®ãŒå®‰å…¨

---

ä½œæˆæ—¥: 2025-10-28
