---
type Props = {
	counterKey?: string;
};

const { counterKey } = Astro.props as Props;

const baseKey = counterKey ?? Astro.url?.pathname ?? 'home';
const trimmedKey = baseKey.replace(/^\/+/, '').replace(/\/+$/, '');
const sanitizedKey = (trimmedKey || 'home').replace(/[^a-zA-Z0-9_/-]/g, '-').toLowerCase();

// hits.sh 배지 URL
const hitsUrl = `https://hits.sh/hun-bot.dev/${sanitizedKey}.svg?style=flat&label=Views&extraCount=0&color=f97316&labelColor=0f172a`;
---

<div class="view-counter">
	<img 
		src={hitsUrl}
		alt="Page views"
		loading="lazy"
		class="view-counter__badge"
	/>
</div>

<style>
	.view-counter {
		display: inline-flex;
		align-items: center;
	}

	.view-counter__badge {
		height: 20px;
		border-radius: 4px;
	}
</style>
